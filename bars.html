<!DOCTYPE html>
<html>
  <head>
    <title>Visimusic: Bars</title>
    <link rel="icon" href="https://marblelover003.github.io/Visimusic/Visimusic.png">
    <style>
      body {
        background: black;
        overflow: hidden;
        font-size: 0;
        width: 768px;
      }
      div {
        background: black;
        width: 3px;
        height: 1px;
        display: inline-block;
      }
      a, a:visited {
        color: white;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <span style="position: absolute; z-index: 99;" id="songSelectMenu">
      <select id="song">
        <option></option>
        <option value="Astrocat">PIXL - Astrocat</option>
        <option value="Barracuda">Noisestorm - Barracuda</option>
        <option value="Be Gone Mr. Gawne">Bossfight - Be Gone Mr. Gawne</option>
        <option value="Buzz Kill">PIXL - Buzz Kill</option>
        <option value="Cascade">Kubbi - Cascade</option>
        <option value="Cheat Codes">Nitro Fun - Cheat Codes</option>
        <option value="Cheat Codes VIP">Nitro Fun - Cheat Codes VIP</option>
        <option value="Checkpoint">Nitro Fun &amp; Hyper Potions - Checkpoint</option>
        <option value="Chip Zeal">Big Giant Circles - Chip Zeal</option>
        <option value="Chronos">Danimal Cannon &amp; Zef - Chronos</option>
        <option value="Commando Steve">Bossfight - Commando Steve</option>
        <option value="Cool Friends">Silva Hound - Cool Friends (Murtagh &amp; Veschell Remix)</option>
        <option value="Core">Zef - Core</option>
        <option value="Corrupted">Danimal Cannon &amp; Zef - Corrupted</option>
        <option value="Courtesy">Chipzel - Courtesy</option>
        <option value="Cruise Control">Zef - Cruise Control</option>
        <option value="Crystal Tokyo">FantomenK &amp; meganeko - Crystal Tokyo</option>
        <option value="Dance of the Incognizant">FantomenK - Dance of the Incognizant</option>
        <option value="Destroid 8 - Annihilate">Excision &amp; Far Too Loud - Destroid 8 Annihilate</option>
        <option value="Destroid 10 - Funk Hole">Excision &amp; Space Laces - Destroid 10 Funk Hole</option>
        <option value="Final Boss">Nitro Fun - Final Boss</option>
        <option value="Flirt Flirt Oh It Hurts">Bossfight - Flirt Flirt Oh It Hurts</option>
        <option value="Focus">Chipzel - Focus</option>
        <option value="FOX">Shirobon - FOX</option>
        <option value="FTW">Lets Be Friends - FTW</option>
        <option value="Houston">Big Giant Circles - Houston</option>
        <option value="HYPE">Tokyo Machine - HYPE</option>
        <option value="Into The Zone">Shirobon - Into the Zone</option>
        <option value="Jack Russel">Bossfight - Jack Russel</option>
        <option value="Legacy">Danimal Cannon - Legacy (feat. Zef)</option>
        <option value="Livewire">Zef - Livewire</option>
        <option value="Logic Gatekeeper">Danimal Cannon &amp; Zef - Logic Gatekeeper</option>
        <option value="Long Live The New Fresh">Danimal Cannon - Long Live the New Fresh</option>
        <option value="Milky Ways">Bossfight - Milky Ways</option>
        <option value="New Game">Nitro Fun - New Game</option>
        <option value="No Party Like a Mojang Party">Big Giant Circles - No Party Like a Mojang Party</option>
        <option value="On The Run">Shirobon - On the Run</option>
        <option value="Once Again">Tristam - Once Again</option>
        <option value="Otis">Chipzel - Otis</option>
        <option value="Paper Dolls">Shawn Daley - Paper Dolls</option>
        <option value="Parallel Processing">Danimal Cannon &amp; Zef - Parallel Processing</option>
        <option value="Partyt Ar Igang">Bossfight - Partyt A&#776;r Iga&#778;ng!</option>
        <option value="Peer Gynt">cYsmix - Peer Gynt</option>
        <option value="Pirate Manners">Bossfight - Pirate Manners</option>
        <option value="Quake">Stereotronique - Quake</option>
        <option value="Rainbow Road">nanobii - Rainbow Road</option>
        <option value="Rocktronik">Pegboard Nerds - Rocktronik</option>
        <option value="Sevcon">Big Giant Circles - Sevcon</option>
        <option value="So Far Away">Nitro Fun - So Far Away</option>
        <option value="Spectra">Chipzel - Spectra</option>
        <option value="Sugar Rush">PIXL - Sugar Rush</option>
        <option value="Tension">Zef - Tension</option>
        <option value="Termination Shock">Sabrepulse - Termination Shock</option>
        <option value="The Art of War">Chipzel - The Art of War</option>
        <option value="The Cave, The Treasure">Bossfight - The Cave, The Treasure</option>
        <option value="The Lunar Whale">Danimal Cannon - The Lunar Whale (feat. Zef)</option>
        <option value="The Maze of Mayonnaise">Bossfight - The Maze of Mayonnaise</option>
        <option value="Till It's Over">Tristam - Till It's Over</option>
        <option value="Tokyo Skies">Chipzel - Tokyo Skies</option>
        <option value="Try This">Pegboard Nerds - Try This</option>
        <option value="Unlocked">Plesco - Unlocked</option>
        <option value="Vindicate Me">Big Giant Circles - Vindicate Me</option>
        <option value="Wicked">Avenza - Wicked</option>
      </select>
      <button onclick="selectSong()" id="button">Go</button>
      <a href="horizontal.html">See a horizontal version here!</a>
    </span>
    <audio src="" id="audio"></audio>
    <img width="145" height="217" style="position: absolute; top: 8px; right: 8px;" id="songTag" src="">
    <span style="position: absolute; bottom: 0; z-index: -99;">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </span>
  </body>
  <script>
    var bar_height, frequency_array,
        styles = {
          alternating: "alternating",
          sequential: "sequential",
          random: "random",
          single: "single"
        },
        pageInitiated = false;
    function initPage() {
      audio = document.getElementById("audio");
      context = new (window.AudioContext || window.webkitAudioContext)();
      analyser = context.createAnalyser();
      source = context.createMediaElementSource(audio);
      source.connect(analyser);
      analyser.connect(context.destination);
      frequency_array = new Uint8Array(analyser.frequencyBinCount);
      analyser.fftSize = 8192;
      analyser.smoothingTimeConstant = 0;
      analyser.minDecibels = -90;
      analyser.maxDecibels = -10;
      analyser.getByteFrequencyData(frequency_array);
      pageInitiated = true;
      audio.addEventListener("ended", function() {
        alert(document.getElementById("song").value + " has ended. If you wish, feel free to pick another song.");
        audio.src = "";
        document.getElementById("songTag").src = "";
        document.getElementById("song").selectedIndex = 0;
        var x = 0;
        for (var i = 0; i < 250; i++) {
          setTimeout(function() {
            document.getElementsByTagName("div")[x].style.background = "#000000";
            x++;
          }, 5*i);
        }
        document.getElementById("button").style.visibility = "visible";
        document.getElementById("song").style.visibility = "visible";
      });
    }
    function selectSong() {
      var song = document.getElementById("song").value;
      audio = document.getElementById("audio");
      audio.src = "https://marblelover003.github.io/Visimusic/" + song + ".mp3";
      document.getElementById("songTag").src = "https://marblelover003.github.io/Visimusic/Song-Tags" + song + ".JPG";
      if (pageInitiated == false) {
        initPage();
      }
      document.getElementById("button").style.visibility = "hidden";
      document.getElementById("song").style.visibility = "hidden";
      var colors, style;
      switch (song) {
        case "Barracuda":
          colors = ["#e7e7e7", "#efefef", "#f7f7f7"];
          style = styles.random;
          break;
        case "Cascade":
          colors = ["#e5af71", "#d19d64", "#e8bc7d"];
          style = styles.random;
          break;
        case "Astrocat":
        case "Cheat Codes":
        case "FTW":
        case "Once Again":
        case "Quake":
        case "Till It\'s Over":
          colors = ["#ffff00"];
          style = styles.single;
          break;
        case "Cheat Codes VIP":
          colors = ["#dfdf60"];
          style = styles.single;
          break;
        case "Checkpoint":
          colors = ["#ff4e5b"];
          style = styles.single;
          break;
        case "Chip Zeal":
          colors = ["#ff0000", "#ff0200", "#ff0400", "#ff0600", "#ff0900", "#ff0b00", "#ff0d00", "#ff0f00", "#ff1100", "#ff1300", "#ff1500", "#ff1800", "#ff1a00", "#ff1c00", "#ff1e00", "#ff2000", "#ff2200", "#ff2400", "#ff2700", "#ff2900", "#ff2b00", "#ff2d00", "#ff2f00", "#ff3100", "#ff3300", "#ff3600", "#ff3800", "#ff3a00", "#ff3c00", "#ff3e00", "#ff4000", "#ff4200", "#ff4500", "#ff4700", "#ff4900", "#ff4b00", "#ff4d00", "#ff4f00", "#ff5100", "#ff5400", "#ff5600", "#ff5800", "#ff5a00", "#ff5c00", "#ff5e00", "#ff6000", "#ff6300", "#ff6500", "#ff6700", "#ff6900", "#ff6b00", "#ff6d00", "#ff6f00", "#ff7200", "#ff7400", "#ff7600", "#ff7800", "#ff7a00", "#ff7c00", "#ff7e00", "#ff8100", "#ff8300", "#ff8500", "#ff8700", "#ff8900", "#ff8b00", "#ff8d00", "#ff9000", "#ff9200", "#ff9400", "#ff9600", "#ff9800", "#ff9a00", "#ff9c00", "#ff9f00", "#ffa100", "#ffa300", "#ffa500", "#ffa700", "#ffa900", "#ffab00", "#ffae00", "#ffb000", "#ffb200", "#ffb400", "#ffb600", "#ffb800", "#ffba00", "#ffbd00", "#ffbf00", "#ffc100", "#ffc300", "#ffc500", "#ffc700", "#ffc900", "#ffcc00", "#ffce00", "#ffd000", "#ffd200", "#ffd400", "#ffd600", "#ffd800", "#ffdb00", "#ffdd00", "#ffdf00", "#ffe100", "#ffe300", "#ffe500", "#ffe700", "#ffea00", "#ffec00", "#ffee00", "#fff000", "#fff200", "#fff400", "#fff600", "#fff900", "#fffb00", "#fffd00", "#ffff00"];
          style = styles.sequential;
          break;
        case "Chronos":
        case "Corrupted":
        case "Legacy":
        case "Logic Gatekeeper":
        case "Parallel Processing":
        case "The Lunar Whale":
          colors = ["#113344"];
          style = styles.single;
          break;
        case "Be Gone Mr. Gawne":
        case "Commando Steve":
        case "Flirt Flirt Oh It Hurts":
        case "Jack Russel":
        case "Milky Ways":
        case "Partyt Ar Igang":
        case "Pirate Manners":
        case "The Cave, The Treasure":
        case "The Maze of Mayonnaise":
          colors = ["#ff9999", "#ffffff"];
          style = styles.alternating;
          break;
        case "Cool Friends":
          colors = ["#4643d2", "#c38ef8"];
          style = styles.alternating;
          break;
        case "Core":
        case "Cruise Control":
        case "Livewire":
        case "Tension":
          colors = ["#ff8000"];
          style = styles.single;
          break;
        case "Courtesy":
        case "Focus":
        case "Otis":
          colors = ["#0432ea"];
          style = styles.single;
          break;
        case "Buzz Kill":
          colors = ["#999999", "#ffff00"];
          style = styles.alternating;
          break;
        case "Crystal Tokyo":
          colors = ["#0000ff", "#ffffff"];
          style = styles.alternating;
          break;
        case "Dance of the Incognizant":
          colors = ["#cf0200", "#190c0b", "#a00000", "#871514", "#9f3134"];
          style = styles.random;
          break;
        case "Destroid 8 - Annihilate":
        case "Destroid 10 - Funk Hole":
          colors = ["linear-gradient(to top, #ff0000, #ffff00)"];
          style = styles.single;
          break;
        case "Final Boss":
          colors = ["#8b008b"];
          style = styles.single;
          break;
        case "FOX":
        case "On The Run":
          colors = ["#008fdd", "#fc00eb", "#6624f8"];
          style = styles.random;
          break;
        case "Houston":
          colors = ["#99ff00"];
          style = styles.single;
          break;
        case "HYPE":
          colors = ["#58f639", "#bae967", "#89e952", "#38fa03", "#8ee050"];
          style = styles.random;
          break;
        case "Into The Zone":
          colors = ["#c00039", "#fe0b41", "#4300bd", "#462784"];
          style = styles.random;
          break;
        case "Long Live The New Fresh":
          colors = ["#801b55", "#483872"];
          style = styles.alternating;
          break;
        case "New Game":
          colors = ["#00bf00", "#00c300", "#00c700", "#00ca00", "#00cf00", "#00d300", "#00d700", "#00da00", "#00df00", "#00e300", "#00e700", "#00ea00", "#00ef00", "#00f300", "#00f700", "#00fa00", "#00ff00"];
          style = styles.random;
          break;
        case "Paper Dolls":
          colors = ["#ffffff"];
          style = styles.single;
          break;
        case "Peer Gynt":
          colors = ["#78a050", "#f5a915"];
          style = styles.alternating;
          break;
        case "Rainbow Road":
        case "Spectra":
          colors = ["#ff0000", "#ff2000", "#ff4000", "#ff6000", "#ff8000", "#ff9f00", "#ffbf00", "#ffdf00", "#ffff00", "#dfff00", "#bfff00", "#9fff00", "#80ff00", "#60ff00", "#40ff00", "#20ff00", "#00ff00", "#00ff20", "#00ff40", "#00ff60", "#00ff80", "#00ff9f", "#00ffbf", "#00ffdf", "#00ffff", "#00dfff", "#00bfff", "#009fff", "#0080ff", "#0060ff", "#0040ff", "#0020ff", "#0000ff", "#2000ff", "#4000ff", "#6000ff", "#8000ff", "#9f00ff", "#bf00ff", "#df00ff", "#ff00ff", "#ff00df", "#ff00bf", "#ff009f", "#ff0080", "#ff0060", "#ff0040", "#ff0020"];
          style = styles.sequential;
          break;
        case "Rocktronik":
          colors = ["#707070", "#747474", "#787878", "#7c7c7c", "#808080", "#848484", "#888888", "#8c8c8c"];
          style = styles.random;
          break;
        case "No Party Like a Mojang Party":
        case "Sevcon":
        case "Wicked":
          colors = ["#ff0000"];
          style = styles.single;
          break;
        case "So Far Away":
          colors = ["#ff9900", "#ffaa00"];
          style = styles.alternating;
          break;
        case "Sugar Rush":
          colors = ["#7fffd4"];
          style = styles.single;
          break;
        case "Termination Shock":
          colors = ["#0000ff", "#0010ff", "#0020ff", "#0030ff", "#0040ff", "#0050ff", "#0060ff", "#0070ff", "#0080ff", "#008fff", "#009fff", "#00afff", "#00bfff", "#00cfff", "#00dfff", "#00efff", "#00ffff", "#00efff", "#00dfff", "#00cfff", "#00bfff", "#00afff", "#009fff", "#008fff", "#0080ff", "#0070ff", "#0060ff", "#0050ff", "#0040ff", "#0030ff", "#0020ff", "#0010ff"];
          style = styles.sequential;
          break;
        case "The Art of War":
          colors = ["#ffd700"];
          style = styles.single;
          break;
        case "Tokyo Skies":
          colors = ["#00008b"];
          style = styles.single;
          break;
        case "Try This":
          colors = ["#ff0080"];
          style = styles.single;
          break;
        case "Unlocked":
          colors = ["#eeeeee"];
          style = styles.single;
          break;
        case "Vindicate Me":
          colors = ["#00ff80"];
          style = styles.single;
          break;
      }
      var y = 0;
      for (var i = 0; i < 250; i++) {
        setTimeout(function() {
          switch (style) {
            case "alternating":
            case "sequential":
              document.getElementsByTagName("div")[y].style.background = colors[y % colors.length];
              break;
            case "random":
              document.getElementsByTagName("div")[y].style.background = colors[Math.floor(Math.random() * colors.length)];
              break;
            case "single":
              document.getElementsByTagName("div")[y].style.background = colors[0];
              break;
          }
          y++;
        }, 5*i);
      }
      setTimeout(function() {
        audio.load();
        audio.play();
        animationLooper();
      }, 1000);
    }
    function animationLooper(){
      analyser.getByteFrequencyData(frequency_array);
      for(var i = 0; i < 250; i++){
        bar_height = Math.pow(frequency_array[i] / 255 * Math.pow(window.innerHeight, 1/5), 5);
        setH(i, bar_height);
      }
      window.requestAnimationFrame(animationLooper);
    }
    function setH(barID, height) {
      document.getElementsByTagName("div")[barID].style.height = (height + 1) + "px";
    }
  </script>
</html>
